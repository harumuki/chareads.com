{"version":3,"sources":["webpack:///./src/components/Reveal/index.tsx","webpack:///./node_modules/qs/lib/utils.js","webpack:///./src/components/RelatedBooks/index.tsx","webpack:///./src/components/MarkdownWrapper/index.tsx","webpack:///./node_modules/qs/lib/stringify.js","webpack:///./node_modules/qs/lib/index.js","webpack:///./src/utils/formatting/text.ts","webpack:///./src/utils/hooks/useWindowSize.ts","webpack:///./node_modules/core-js/modules/es7.object.values.js","webpack:///./src/components/Reveal/RevealTrigger.tsx","webpack:///./node_modules/qs/lib/parse.js","webpack:///./node_modules/qs/lib/formats.js","webpack:///./node_modules/core-js/modules/es6.string.link.js","webpack:///./src/utils/urls/getQueryParameters.ts","webpack:///./src/views/VideoPage/VideoPlayer.tsx","webpack:///./src/views/VideoPage/VideoTimestamp.tsx","webpack:///./src/views/VideoPage/VideoTimestampList.tsx","webpack:///./src/views/VideoPage/VideoMeta.tsx","webpack:///./src/views/VideoPage/VideoOwnedBook.tsx","webpack:///./src/views/VideoPage/index.tsx","webpack:///./src/utils/urls/affiliates.ts","webpack:///./src/components/BookAffiliates/index.tsx"],"names":["StyledContent","styled","div","isOpen","isTransitioning","Reveal","children","open","ariaId","className","as","useState","setIsOpen","setIsTransitioning","contentHeight","setContentHeight","contentEl","createRef","useEffect","ref","current","clientHeight","setTimeout","id","aria-hidden","style","maxHeight","has","Object","prototype","hasOwnProperty","isArray","Array","hexTable","array","i","push","toString","toUpperCase","arrayToObject","source","options","obj","plainObjects","create","length","module","exports","assign","target","keys","reduce","acc","key","combine","a","b","concat","compact","value","queue","o","prop","refs","item","j","val","indexOf","pop","compacted","compactQueue","decode","str","decoder","charset","strWithoutPlus","replace","unescape","decodeURIComponent","e","encode","defaultEncoder","string","Symbol","call","String","escape","$0","parseInt","slice","out","c","charCodeAt","charAt","isBuffer","constructor","isRegExp","merge","allowPrototypes","mergeTarget","forEach","targetItem","StyledWrapper","StyledTitleGridItem","GridItem","screenMin","m","StyledGrid","Grid","FONT","SIZE","S","screen","l","RelatedBooks","books","featuredSlugs","ownedSlug","full","size","map","book","featured","slug","includes","span","spanFromM","spanFromL","hideDetails","MarkdownWrapper","trim","COLOR","BACKGROUND_DARK","M","utils","formats","arrayPrefixGenerators","brackets","prefix","comma","indices","repeat","pushToArray","arr","valueOrArray","apply","toISO","Date","toISOString","defaultFormat","defaults","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","encodeValuesOnly","format","formatter","formatters","serializeDate","date","skipNulls","strictNullHandling","stringify","object","generateArrayPrefix","filter","sort","v","join","objKeys","values","opts","undefined","TypeError","normalizeStringifyOptions","arrayFormat","joined","parse","stripHtml","text","sortAlphabetically","strings","useWindowSize","window","width","height","getSize","innerWidth","innerHeight","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","$export","$values","it","StyledSummaryTrigger","button","WEIGHT","BOLD","screenMax","s","StyledIcon","RevealTrigger","onClick","aria-expanded","aria-controls","arrayLimit","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","numberStr","fromCharCode","parseKeys","givenKey","child","segment","exec","parent","index","chain","leaf","root","cleanRoot","isNaN","0","parseObject","Error","normalizeParseOptions","tempObj","cleanStr","limit","Infinity","parts","split","skipIndex","part","bracketEqualsPos","pos","parseValues","newObj","percentTwenties","util","Format","RFC1738","RFC3986","createHTML","url","this","getQueryParameters","location","search","qs","YouTubePlayerConfig","youtube","playerVars","rel","controls","VideoPlayer","youtubeId","isPlaying","setIsPlaying","setPlayedSeconds","videoComponent","backgroundColor","startAtSeconds","setStartAtSeconds","params","at","startAt","unformatTimestamp","AspectRatioWrapper","onPlay","onPause","onProgress","playedSeconds","progressInterval","playing","config","StyledVideoTimestamp","li","active","StyledTime","time","StyledDetails","StyledText","p","StyledBookLink","Link","StyledStarRating","StarRating","StyledReveal","VideoTimestamp","t","link","jumpToTimestamp","tagName","formatTimestamp","href","ArrowIcon","to","of7","rating7","BookAffiliates","links","BACKGROUND","StyledVideoTimestampList","ol","toVW","getWidthOfColumns","xl","BORDER_RADIUS","VideoTimestampList","timestamps","startPlaying","seekTo","StyledAside","aside","StyledRevealTrigger","dl","StyledDt","dt","StyledDd","dd","VideoMeta","datePublished","viewCount","commentCount","windowWidth","BREAKPOINT","formatDate","process","formatNumberInThousands","StyledLink","VideoOwnedBook","StyledTimestampGridItem","StyledMeta","GAP","L","XL","StyledTitleWrapper","StyledTitle","H","StyledBlockquote","blockquote","FAMILY","DECORATIVE","query","VideoPage","video","data","useRef","ownedBook","ownedBy","relatedBooks","featuredRelatedBookSlugs","flipLayout","Layout","navTitle","navTitleLink","PATHS","VIDEOS","title","description","html","shareImage","image","childImageSharp","share","src","columnsFromL","columnsFromXL","colors","muted","columnsFromM","rows","rowsFromL","quote","dangerouslySetInnerHTML","__html","spanRows","spanRowsFromL","marginTop","marginBottom","alignSelf","AFFILIATES","GOODREADS","AMAZON","BOOK_DEPOSITORY","AFFILIATE_ACTIONS","StyledLi","StyledArrowIcon","entries","affiliateAbbr","label","long"],"mappings":"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","file":"component---src-views-video-page-index-tsx-4d0a5a526f45f9f9807c.js","sourcesContent":["import React, { useState, useEffect, createRef } from 'react'\nimport styled from 'styled-components'\n\nconst TRANSITION_DURATION_IN_MS = 200\n\ninterface ContentProps {\n  ref: React.RefObject<React.ReactNode>\n  isOpen: boolean\n  isTransitioning: boolean\n  contentHeight: number\n  className?: string\n  as?: string\n}\n\nconst StyledContent = styled.div<ContentProps>`\n  margin: 0;\n  will-change: opacity, max-height;\n  transition: opacity ${TRANSITION_DURATION_IN_MS}ms ease-in-out, max-height ${TRANSITION_DURATION_IN_MS}ms ease-in-out;\n  overflow: hidden;\n\n  ${({ isOpen, isTransitioning }): string =>\n    !isOpen &&\n    !isTransitioning &&\n    `\n      position: absolute;\n      opacity: 0;\n      pointer-events: none;\n  `}\n\n  ${({ isTransitioning }): string =>\n    isTransitioning &&\n    `\n      opacity: 0;\n      max-height: 0;\n  `}\n\n  ${({ isOpen }): string =>\n    isOpen &&\n    `\n      opacity: 1;\n  `}\n`\n\ninterface Props {\n  children: React.ReactNode\n  open: boolean\n  ariaId?: string\n  className?: string\n  as?: string\n}\n\nconst Reveal: React.FC<Props> = ({ children, open, ariaId, className, as }) => {\n  const [isOpen, setIsOpen] = useState(open)\n  const [isTransitioning, setIsTransitioning] = useState(false)\n  const [contentHeight, setContentHeight] = useState(null)\n  const contentEl = createRef<HTMLDivElement>()\n\n  useEffect(() => {\n    if (open) {\n      const ref = contentEl.current as HTMLElement\n      setContentHeight(ref.clientHeight)\n      setIsTransitioning(true)\n    } else {\n      setIsOpen(false)\n      setTimeout(() => setIsTransitioning(false), TRANSITION_DURATION_IN_MS)\n    }\n  }, [open])\n\n  useEffect(() => {\n    if (isTransitioning && !isOpen) setTimeout(() => setIsOpen(true), 50)\n  }, [isTransitioning])\n\n  return (\n    <StyledContent\n      className={className}\n      ref={contentEl}\n      isOpen={isOpen}\n      isTransitioning={isTransitioning}\n      id={ariaId}\n      aria-hidden={!isOpen}\n      as={as}\n      style={{\n        maxHeight: isOpen && contentHeight,\n      }}\n    >\n      {children}\n    </StyledContent>\n  )\n}\n\nexport default Reveal\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.reduce\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = function () {\n  var array = [];\n\n  for (var i = 0; i < 256; ++i) {\n    array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n  }\n\n  return array;\n}();\n\nvar compactQueue = function compactQueue(queue) {\n  while (queue.length > 1) {\n    var item = queue.pop();\n    var obj = item.obj[item.prop];\n\n    if (isArray(obj)) {\n      var compacted = [];\n\n      for (var j = 0; j < obj.length; ++j) {\n        if (typeof obj[j] !== 'undefined') {\n          compacted.push(obj[j]);\n        }\n      }\n\n      item.obj[item.prop] = compacted;\n    }\n  }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n  var obj = options && options.plainObjects ? Object.create(null) : {};\n\n  for (var i = 0; i < source.length; ++i) {\n    if (typeof source[i] !== 'undefined') {\n      obj[i] = source[i];\n    }\n  }\n\n  return obj;\n};\n\nvar merge = function merge(target, source, options) {\n  /* eslint no-param-reassign: 0 */\n  if (!source) {\n    return target;\n  }\n\n  if (typeof source !== 'object') {\n    if (isArray(target)) {\n      target.push(source);\n    } else if (target && typeof target === 'object') {\n      if (options && (options.plainObjects || options.allowPrototypes) || !has.call(Object.prototype, source)) {\n        target[source] = true;\n      }\n    } else {\n      return [target, source];\n    }\n\n    return target;\n  }\n\n  if (!target || typeof target !== 'object') {\n    return [target].concat(source);\n  }\n\n  var mergeTarget = target;\n\n  if (isArray(target) && !isArray(source)) {\n    mergeTarget = arrayToObject(target, options);\n  }\n\n  if (isArray(target) && isArray(source)) {\n    source.forEach(function (item, i) {\n      if (has.call(target, i)) {\n        var targetItem = target[i];\n\n        if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n          target[i] = merge(targetItem, item, options);\n        } else {\n          target.push(item);\n        }\n      } else {\n        target[i] = item;\n      }\n    });\n    return target;\n  }\n\n  return Object.keys(source).reduce(function (acc, key) {\n    var value = source[key];\n\n    if (has.call(acc, key)) {\n      acc[key] = merge(acc[key], value, options);\n    } else {\n      acc[key] = value;\n    }\n\n    return acc;\n  }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n  return Object.keys(source).reduce(function (acc, key) {\n    acc[key] = source[key];\n    return acc;\n  }, target);\n};\n\nvar decode = function decode(str, decoder, charset) {\n  var strWithoutPlus = str.replace(/\\+/g, ' ');\n\n  if (charset === 'iso-8859-1') {\n    // unescape never throws, no try...catch needed:\n    return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n  } // utf-8\n\n\n  try {\n    return decodeURIComponent(strWithoutPlus);\n  } catch (e) {\n    return strWithoutPlus;\n  }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n  // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n  // It has been adapted here for stricter adherence to RFC 3986\n  if (str.length === 0) {\n    return str;\n  }\n\n  var string = str;\n\n  if (typeof str === 'symbol') {\n    string = Symbol.prototype.toString.call(str);\n  } else if (typeof str !== 'string') {\n    string = String(str);\n  }\n\n  if (charset === 'iso-8859-1') {\n    return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n      return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n    });\n  }\n\n  var out = '';\n\n  for (var i = 0; i < string.length; ++i) {\n    var c = string.charCodeAt(i);\n\n    if (c === 0x2D // -\n    || c === 0x2E // .\n    || c === 0x5F // _\n    || c === 0x7E // ~\n    || c >= 0x30 && c <= 0x39 // 0-9\n    || c >= 0x41 && c <= 0x5A // a-z\n    || c >= 0x61 && c <= 0x7A // A-Z\n    ) {\n        out += string.charAt(i);\n        continue;\n      }\n\n    if (c < 0x80) {\n      out = out + hexTable[c];\n      continue;\n    }\n\n    if (c < 0x800) {\n      out = out + (hexTable[0xC0 | c >> 6] + hexTable[0x80 | c & 0x3F]);\n      continue;\n    }\n\n    if (c < 0xD800 || c >= 0xE000) {\n      out = out + (hexTable[0xE0 | c >> 12] + hexTable[0x80 | c >> 6 & 0x3F] + hexTable[0x80 | c & 0x3F]);\n      continue;\n    }\n\n    i += 1;\n    c = 0x10000 + ((c & 0x3FF) << 10 | string.charCodeAt(i) & 0x3FF);\n    out += hexTable[0xF0 | c >> 18] + hexTable[0x80 | c >> 12 & 0x3F] + hexTable[0x80 | c >> 6 & 0x3F] + hexTable[0x80 | c & 0x3F];\n  }\n\n  return out;\n};\n\nvar compact = function compact(value) {\n  var queue = [{\n    obj: {\n      o: value\n    },\n    prop: 'o'\n  }];\n  var refs = [];\n\n  for (var i = 0; i < queue.length; ++i) {\n    var item = queue[i];\n    var obj = item.obj[item.prop];\n    var keys = Object.keys(obj);\n\n    for (var j = 0; j < keys.length; ++j) {\n      var key = keys[j];\n      var val = obj[key];\n\n      if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n        queue.push({\n          obj: obj,\n          prop: key\n        });\n        refs.push(val);\n      }\n    }\n  }\n\n  compactQueue(queue);\n  return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n  return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n  return [].concat(a, b);\n};\n\nmodule.exports = {\n  arrayToObject: arrayToObject,\n  assign: assign,\n  combine: combine,\n  compact: compact,\n  decode: decode,\n  encode: encode,\n  isBuffer: isBuffer,\n  isRegExp: isRegExp,\n  merge: merge\n};","import React from 'react'\nimport styled from 'styled-components'\n\nimport Grid from 'components/Grid'\nimport GridItem from 'components/Grid/GridItem'\nimport H from 'components/H'\nimport { FONT } from 'styles/tokens'\nimport { screen, screenMin } from 'styles/responsive'\n\nimport { BookCardType } from 'types/book'\nimport BookCard from 'components/cards/BookCard'\n\nconst StyledWrapper = styled.div`\n  margin: 2em 0 1em;\n`\n\nconst StyledTitleGridItem = styled(GridItem)`\n  ${screenMin.m`\n    display: none;\n  `}\n`\n\nconst StyledGrid = styled(Grid)`\n  font-size: ${FONT.SIZE.S};\n\n  ${screen.l`\n    > *:nth-last-child(1) {\n      display: none;\n    }\n  `}\n`\n\ninterface Props {\n  books: BookCardType[]\n  featuredSlugs?: string[]\n  ownedSlug?: string\n}\n\nconst RelatedBooks: React.FC<Props> = ({ books, featuredSlugs, ownedSlug }) => {\n  if (!books || books.length === 0) return null\n\n  return (\n    <StyledWrapper>\n      <StyledGrid full>\n        <StyledTitleGridItem>\n          <H size=\"L\" as=\"h2\">\n            Related books\n          </H>\n        </StyledTitleGridItem>\n\n        {books.map(\n          (book: BookCardType): React.ReactNode => {\n            const featured = ownedSlug\n              ? ownedSlug === book.slug\n              : featuredSlugs && featuredSlugs.includes(book.slug)\n\n            return (\n              <GridItem key={book.id} span={1} spanFromM={3} spanFromL={2}>\n                <BookCard\n                  book={book}\n                  featured={featured}\n                  hideDetails={ownedSlug === book.slug}\n                />\n              </GridItem>\n            )\n          }\n        )}\n      </StyledGrid>\n    </StyledWrapper>\n  )\n}\n\nexport default RelatedBooks\n","import styled from 'styled-components'\nimport { COLOR, FONT } from 'styles/tokens'\nimport { trim } from 'styles/helpers'\n\nconst MarkdownWrapper = styled.div`\n  ${trim}\n\n  hr {\n    height: 0.1em;\n    background: ${COLOR.BACKGROUND_DARK};\n    border: 0;\n    margin: 1em 0;\n  }\n\n  blockquote {\n    margin-left: 0;\n    border-left: 0.2em solid ${COLOR.BACKGROUND_DARK};\n    padding-left: 1em;\n  }\n\n  h2 {\n    margin-top: 1em;\n    font-size: ${FONT.SIZE.M};\n  }\n\n  h3,\n  h4 {\n    margin-top: 1em;\n    font-size: ${FONT.SIZE.S};\n  }\n\n  img {\n    max-width: 100%;\n  }\n\n  ul {\n    list-style: disc;\n  }\n\n  ol {\n    list-style: decimal;\n  }\n\n  p,\n  ul,\n  ol {\n    margin: 0.5em 0;\n  }\n\n  ul,\n  ol {\n    padding-left: 1em;\n    ${trim}\n  }\n\n  li {\n    margin: 0.25em 0;\n  }\n\n  a {\n    text-decoration: underline;\n    text-decoration-color: var(--secondary-color);\n  }\n`\n\nexport default MarkdownWrapper\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.date.to-iso-string\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar utils = require('./utils');\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar arrayPrefixGenerators = {\n  brackets: function brackets(prefix) {\n    return prefix + '[]';\n  },\n  comma: 'comma',\n  indices: function indices(prefix, key) {\n    return prefix + '[' + key + ']';\n  },\n  repeat: function repeat(prefix) {\n    return prefix;\n  }\n};\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\n\nvar pushToArray = function pushToArray(arr, valueOrArray) {\n  push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\nvar defaultFormat = formats['default'];\nvar defaults = {\n  addQueryPrefix: false,\n  allowDots: false,\n  charset: 'utf-8',\n  charsetSentinel: false,\n  delimiter: '&',\n  encode: true,\n  encoder: utils.encode,\n  encodeValuesOnly: false,\n  format: defaultFormat,\n  formatter: formats.formatters[defaultFormat],\n  // deprecated\n  indices: false,\n  serializeDate: function serializeDate(date) {\n    return toISO.call(date);\n  },\n  skipNulls: false,\n  strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n  return typeof v === 'string' || typeof v === 'number' || typeof v === 'boolean' || typeof v === 'symbol' || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset) {\n  var obj = object;\n\n  if (typeof filter === 'function') {\n    obj = filter(prefix, obj);\n  } else if (obj instanceof Date) {\n    obj = serializeDate(obj);\n  } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n    obj = obj.join(',');\n  }\n\n  if (obj === null) {\n    if (strictNullHandling) {\n      return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n    }\n\n    obj = '';\n  }\n\n  if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n    if (encoder) {\n      var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n      return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n    }\n\n    return [formatter(prefix) + '=' + formatter(String(obj))];\n  }\n\n  var values = [];\n\n  if (typeof obj === 'undefined') {\n    return values;\n  }\n\n  var objKeys;\n\n  if (isArray(filter)) {\n    objKeys = filter;\n  } else {\n    var keys = Object.keys(obj);\n    objKeys = sort ? keys.sort(sort) : keys;\n  }\n\n  for (var i = 0; i < objKeys.length; ++i) {\n    var key = objKeys[i];\n\n    if (skipNulls && obj[key] === null) {\n      continue;\n    }\n\n    if (isArray(obj)) {\n      pushToArray(values, stringify(obj[key], typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset));\n    } else {\n      pushToArray(values, stringify(obj[key], prefix + (allowDots ? '.' + key : '[' + key + ']'), generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset));\n    }\n  }\n\n  return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n  if (!opts) {\n    return defaults;\n  }\n\n  if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n    throw new TypeError('Encoder has to be a function.');\n  }\n\n  var charset = opts.charset || defaults.charset;\n\n  if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n    throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n  }\n\n  var format = formats['default'];\n\n  if (typeof opts.format !== 'undefined') {\n    if (!has.call(formats.formatters, opts.format)) {\n      throw new TypeError('Unknown format option provided.');\n    }\n\n    format = opts.format;\n  }\n\n  var formatter = formats.formatters[format];\n  var filter = defaults.filter;\n\n  if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n    filter = opts.filter;\n  }\n\n  return {\n    addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n    allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n    charset: charset,\n    charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n    delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n    encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n    encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n    encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n    filter: filter,\n    formatter: formatter,\n    serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n    skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n    sort: typeof opts.sort === 'function' ? opts.sort : null,\n    strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n  };\n};\n\nmodule.exports = function (object, opts) {\n  var obj = object;\n  var options = normalizeStringifyOptions(opts);\n  var objKeys;\n  var filter;\n\n  if (typeof options.filter === 'function') {\n    filter = options.filter;\n    obj = filter('', obj);\n  } else if (isArray(options.filter)) {\n    filter = options.filter;\n    objKeys = filter;\n  }\n\n  var keys = [];\n\n  if (typeof obj !== 'object' || obj === null) {\n    return '';\n  }\n\n  var arrayFormat;\n\n  if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n    arrayFormat = opts.arrayFormat;\n  } else if (opts && 'indices' in opts) {\n    arrayFormat = opts.indices ? 'indices' : 'repeat';\n  } else {\n    arrayFormat = 'indices';\n  }\n\n  var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n  if (!objKeys) {\n    objKeys = Object.keys(obj);\n  }\n\n  if (options.sort) {\n    objKeys.sort(options.sort);\n  }\n\n  for (var i = 0; i < objKeys.length; ++i) {\n    var key = objKeys[i];\n\n    if (options.skipNulls && obj[key] === null) {\n      continue;\n    }\n\n    pushToArray(keys, stringify(obj[key], key, generateArrayPrefix, options.strictNullHandling, options.skipNulls, options.encode ? options.encoder : null, options.filter, options.sort, options.allowDots, options.serializeDate, options.formatter, options.encodeValuesOnly, options.charset));\n  }\n\n  var joined = keys.join(options.delimiter);\n  var prefix = options.addQueryPrefix === true ? '?' : '';\n\n  if (options.charsetSentinel) {\n    if (options.charset === 'iso-8859-1') {\n      // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n      prefix += 'utf8=%26%2310003%3B&';\n    } else {\n      // encodeURIComponent('✓')\n      prefix += 'utf8=%E2%9C%93&';\n    }\n  }\n\n  return joined.length > 0 ? prefix + joined : '';\n};","'use strict';\n\nvar stringify = require('./stringify');\n\nvar parse = require('./parse');\n\nvar formats = require('./formats');\n\nmodule.exports = {\n  formats: formats,\n  parse: parse,\n  stringify: stringify\n};","import { Book } from 'types/book'\n\nexport const getBookDetailsFromString = (\n  text: string\n): Pick<Book, 'title' | 'author'> | undefined => {\n  const referenceMatch = text.match(/^(.+), (.+)$/)\n  return (\n    referenceMatch && {\n      title: referenceMatch[1],\n      author: referenceMatch[2],\n    }\n  )\n}\n\nexport const formatBookDetails = ({\n  title,\n  author,\n}: Pick<Book, 'title' | 'author'>): string => `${title} by ${author}`\n\nexport const stripHtml = (text: string): string =>\n  text\n    .replace(/<\\/[^>]+><[^>/]+>/gm, ' ')\n    .replace(/<\\/?[^>]+>/g, '')\n    .replace(/ +/gm, ' ')\n    .trim()\n\nexport const sortAlphabetically = (strings: string[]): string[] =>\n  strings.sort((a, b) => (a < b ? -1 : a > b ? 1 : 0))\n","import { useState, useEffect } from 'react'\n\ninterface WindowSize {\n  width: number\n  height: number\n}\n\nconst useWindowSize = (): WindowSize => {\n  if (typeof window === 'undefined') {\n    return { width: null, height: null }\n  }\n\n  const getSize = (): WindowSize => ({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  })\n\n  const [windowSize, setWindowSize] = useState(getSize)\n\n  useEffect(() => {\n    const handleResize = (): void => setWindowSize(getSize())\n\n    window.addEventListener('resize', handleResize)\n    return (): void => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowSize\n}\n\nexport default useWindowSize\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { FONT } from 'styles/tokens'\nimport { screenMax } from 'styles/responsive'\nimport Link from 'components/links/Link'\n\nconst StyledSummaryTrigger = styled.button`\n  font-size: ${FONT.SIZE.S};\n  font-weight: ${FONT.WEIGHT.BOLD};\n\n  ${screenMax.s`\n    width: 100%;\n    text-align: left;\n  `}\n`\n\nconst StyledIcon = styled.i<Pick<Props, 'open'>>`\n  display: inline-block;\n  position: relative;\n  width: 1.25em;\n  height: 1.25em;\n  vertical-align: -0.3em;\n\n  &:before,\n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 50%;\n    left: 0.35em;\n    width: 0.7em;\n    height: 0.125em;\n    background: currentColor;\n    transform-origin: 50% 50%;\n    transform: translate(-50%, -50%);\n    transition: transform 0.2s linear;\n  }\n\n  ${({ open }): string =>\n    !open &&\n    `\n    &:before {\n      transform: translate(-50%, -50%) rotate(-90deg);\n    }\n  `}\n`\n\ninterface Props {\n  children: React.ReactNode\n  open: boolean\n  ariaId?: string\n  onClick: () => void\n  className?: string\n}\n\nconst RevealTrigger: React.FC<Props> = ({\n  children,\n  open,\n  ariaId,\n  onClick,\n  className,\n}) => (\n  <Link\n    onClick={onClick}\n    aria-expanded={open}\n    aria-controls={ariaId}\n    as={StyledSummaryTrigger}\n    className={className}\n  >\n    <StyledIcon open={open} />\n    {children}\n  </Link>\n)\n\nexport default RevealTrigger\n","'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\nvar defaults = {\n  allowDots: false,\n  allowPrototypes: false,\n  arrayLimit: 20,\n  charset: 'utf-8',\n  charsetSentinel: false,\n  comma: false,\n  decoder: utils.decode,\n  delimiter: '&',\n  depth: 5,\n  ignoreQueryPrefix: false,\n  interpretNumericEntities: false,\n  parameterLimit: 1000,\n  parseArrays: true,\n  plainObjects: false,\n  strictNullHandling: false\n};\n\nvar interpretNumericEntities = function interpretNumericEntities(str) {\n  return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n    return String.fromCharCode(parseInt(numberStr, 10));\n  });\n}; // This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\n\n\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\n\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n  var obj = {};\n  var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n  var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n  var parts = cleanStr.split(options.delimiter, limit);\n  var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n\n  var i;\n  var charset = options.charset;\n\n  if (options.charsetSentinel) {\n    for (i = 0; i < parts.length; ++i) {\n      if (parts[i].indexOf('utf8=') === 0) {\n        if (parts[i] === charsetSentinel) {\n          charset = 'utf-8';\n        } else if (parts[i] === isoSentinel) {\n          charset = 'iso-8859-1';\n        }\n\n        skipIndex = i;\n        i = parts.length; // The eslint settings do not allow break;\n      }\n    }\n  }\n\n  for (i = 0; i < parts.length; ++i) {\n    if (i === skipIndex) {\n      continue;\n    }\n\n    var part = parts[i];\n    var bracketEqualsPos = part.indexOf(']=');\n    var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n    var key, val;\n\n    if (pos === -1) {\n      key = options.decoder(part, defaults.decoder, charset, 'key');\n      val = options.strictNullHandling ? null : '';\n    } else {\n      key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n      val = options.decoder(part.slice(pos + 1), defaults.decoder, charset, 'value');\n    }\n\n    if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n      val = interpretNumericEntities(val);\n    }\n\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n      val = val.split(',');\n    }\n\n    if (part.indexOf('[]=') > -1) {\n      val = isArray(val) ? [val] : val;\n    }\n\n    if (has.call(obj, key)) {\n      obj[key] = utils.combine(obj[key], val);\n    } else {\n      obj[key] = val;\n    }\n  }\n\n  return obj;\n};\n\nvar parseObject = function parseObject(chain, val, options) {\n  var leaf = val;\n\n  for (var i = chain.length - 1; i >= 0; --i) {\n    var obj;\n    var root = chain[i];\n\n    if (root === '[]' && options.parseArrays) {\n      obj = [].concat(leaf);\n    } else {\n      obj = options.plainObjects ? Object.create(null) : {};\n      var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n      var index = parseInt(cleanRoot, 10);\n\n      if (!options.parseArrays && cleanRoot === '') {\n        obj = {\n          0: leaf\n        };\n      } else if (!isNaN(index) && root !== cleanRoot && String(index) === cleanRoot && index >= 0 && options.parseArrays && index <= options.arrayLimit) {\n        obj = [];\n        obj[index] = leaf;\n      } else {\n        obj[cleanRoot] = leaf;\n      }\n    }\n\n    leaf = obj;\n  }\n\n  return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n  if (!givenKey) {\n    return;\n  } // Transform dot notation to bracket notation\n\n\n  var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey; // The regex chunks\n\n  var brackets = /(\\[[^[\\]]*])/;\n  var child = /(\\[[^[\\]]*])/g; // Get the parent\n\n  var segment = options.depth > 0 && brackets.exec(key);\n  var parent = segment ? key.slice(0, segment.index) : key; // Stash the parent if it exists\n\n  var keys = [];\n\n  if (parent) {\n    // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n    if (!options.plainObjects && has.call(Object.prototype, parent)) {\n      if (!options.allowPrototypes) {\n        return;\n      }\n    }\n\n    keys.push(parent);\n  } // Loop through children appending to the array until we hit depth\n\n\n  var i = 0;\n\n  while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n    i += 1;\n\n    if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n      if (!options.allowPrototypes) {\n        return;\n      }\n    }\n\n    keys.push(segment[1]);\n  } // If there's a remainder, just add whatever is left\n\n\n  if (segment) {\n    keys.push('[' + key.slice(segment.index) + ']');\n  }\n\n  return parseObject(keys, val, options);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n  if (!opts) {\n    return defaults;\n  }\n\n  if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n    throw new TypeError('Decoder has to be a function.');\n  }\n\n  if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n    throw new Error('The charset option must be either utf-8, iso-8859-1, or undefined');\n  }\n\n  var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n  return {\n    allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n    allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n    arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n    charset: charset,\n    charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n    comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n    decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n    delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n    // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n    depth: typeof opts.depth === 'number' || opts.depth === false ? +opts.depth : defaults.depth,\n    ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n    interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n    parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n    parseArrays: opts.parseArrays !== false,\n    plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n    strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n  };\n};\n\nmodule.exports = function (str, opts) {\n  var options = normalizeParseOptions(opts);\n\n  if (str === '' || str === null || typeof str === 'undefined') {\n    return options.plainObjects ? Object.create(null) : {};\n  }\n\n  var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n  var obj = options.plainObjects ? Object.create(null) : {}; // Iterate over the keys and setup the new object\n\n  var keys = Object.keys(tempObj);\n\n  for (var i = 0; i < keys.length; ++i) {\n    var key = keys[i];\n    var newObj = parseKeys(key, tempObj[key], options);\n    obj = utils.merge(obj, newObj, options);\n  }\n\n  return utils.compact(obj);\n};","'use strict';\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n  RFC1738: 'RFC1738',\n  RFC3986: 'RFC3986'\n};\nmodule.exports = util.assign({\n  'default': Format.RFC3986,\n  formatters: {\n    RFC1738: function RFC1738(value) {\n      return replace.call(value, percentTwenties, '+');\n    },\n    RFC3986: function RFC3986(value) {\n      return String(value);\n    }\n  }\n}, Format);","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n","import qs from 'qs'\n\nconst getQueryParameters = (): { [key: string]: string | number } => {\n  if (!window.location.search) {\n    return {}\n  }\n\n  return qs.parse(window.location.search, { ignoreQueryPrefix: true })\n}\n\nexport default getQueryParameters\n","import React, { useState, useEffect } from 'react'\nimport YouTubePlayer from 'react-player/lib/players/YouTube'\n\nimport { Video } from 'types/video'\nimport { unformatTimestamp } from 'utils/formatting/time'\nimport getQueryParameters from 'utils/urls/getQueryParameters'\nimport AspectRatioWrapper from 'components/AspectRatioWrapper'\n\nconst YouTubePlayerConfig = {\n  youtube: {\n    playerVars: {\n      rel: 0,\n      controls: 1,\n    },\n  },\n}\n\ntype VideoProps = Pick<Video, 'youtubeId'>\n\ninterface Props extends VideoProps {\n  isPlaying: boolean\n  setIsPlaying: React.Dispatch<React.SetStateAction<boolean>>\n  setPlayedSeconds: React.Dispatch<React.SetStateAction<number>>\n  videoComponent: React.MutableRefObject<undefined>\n  backgroundColor: string\n}\n\nconst VideoPlayer: React.FC<Props> = ({\n  youtubeId,\n  isPlaying,\n  setIsPlaying,\n  setPlayedSeconds,\n  videoComponent,\n  backgroundColor,\n}) => {\n  const [startAtSeconds, setStartAtSeconds] = useState(0)\n\n  useEffect((): void => {\n    const params = getQueryParameters()\n    if (params.at) {\n      const startAt = unformatTimestamp(params.at as string)\n      setStartAtSeconds(startAt)\n      setPlayedSeconds(startAt)\n    }\n  }, [])\n\n  return (\n    <AspectRatioWrapper style={{ backgroundColor }}>\n      <YouTubePlayer\n        url={`https://www.youtube.com/watch?v=${youtubeId}${startAtSeconds >\n          0 && `&t=${startAtSeconds}`}`}\n        ref={videoComponent}\n        onPlay={(): void => setIsPlaying(true)}\n        onPause={(): void => setIsPlaying(false)}\n        onProgress={({ playedSeconds }): void =>\n          setPlayedSeconds(playedSeconds)\n        }\n        progressInterval={500}\n        playing={isPlaying}\n        config={YouTubePlayerConfig}\n        controls\n        width=\"100%\"\n        height=\"100%\"\n      />\n    </AspectRatioWrapper>\n  )\n}\n\nexport default VideoPlayer\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { Timestamp } from 'types/timestamp'\nimport { formatTimestamp } from 'utils/formatting/time'\nimport { COLOR, FONT } from 'styles/tokens'\nimport { trim } from 'styles/helpers'\nimport Link from 'components/links/Link'\nimport StarRating from 'components/StarRating'\nimport ArrowIcon from 'components/icons/ArrowIcon'\nimport Reveal from 'components/Reveal'\nimport BookAffiliates from 'components/BookAffiliates'\n\nconst StyledVideoTimestamp = styled.li<Pick<Props, 'active'>>`\n  padding: 0.375em 0.75em;\n  display: flex;\n  cursor: pointer;\n  font-size: ${FONT.SIZE.S};\n\n  ${({ active }): string => active && `background: ${COLOR.BACKGROUND_DARK};`}\n`\n\nconst StyledTime = styled.time`\n  min-width: 4ch;\n  margin-right: 1ch;\n  line-height: 1.25;\n`\n\nconst StyledDetails = styled.div`\n  flex: 1;\n\n  > * {\n    margin: 0;\n  }\n`\n\nconst StyledText = styled.p`\n  font-weight: ${FONT.WEIGHT.BOLD};\n  line-height: 1.25;\n`\n\nconst StyledBookLink = styled(Link)`\n  display: block;\n  width: max-content;\n  font-size: ${FONT.SIZE.S};\n`\n\nconst StyledStarRating = styled(StarRating)`\n  display: inline-block;\n  vertical-align: text-top;\n`\n\nconst StyledReveal = styled(Reveal)`\n  transition: max-height 200ms linear;\n  ${trim}\n`\n\ninterface Props extends Timestamp {\n  jumpToTimestamp: (t: number, startPlaying: boolean) => void\n  active: boolean\n}\n\nconst VideoTimestamp: React.FC<Props> = ({\n  t,\n  text,\n  link,\n  book,\n  active,\n  jumpToTimestamp,\n}) => (\n  <StyledVideoTimestamp\n    key={t}\n    onClick={(e): void => {\n      const element = e.target as HTMLElement\n      if (element.tagName !== 'a') jumpToTimestamp(t, true)\n    }}\n    active={active}\n  >\n    <StyledTime>{formatTimestamp(t)}</StyledTime>\n    <StyledDetails>\n      <StyledText>\n        {link ? (\n          <Link href={link} as=\"a\">\n            {text}\n            <ArrowIcon />\n          </Link>\n        ) : (\n          text\n        )}\n      </StyledText>\n      {book && (\n        <>\n          <StyledBookLink to={book.slug}>\n            <StyledStarRating of7={book.rating7} />\n            <ArrowIcon />\n          </StyledBookLink>\n\n          <StyledReveal open={active}>\n            <BookAffiliates links={book.links} />\n          </StyledReveal>\n        </>\n      )}\n    </StyledDetails>\n  </StyledVideoTimestamp>\n)\n\nexport default VideoTimestamp\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { Timestamp } from 'types/timestamp'\nimport { COLOR, BORDER_RADIUS } from 'styles/tokens'\nimport { screen } from 'styles/responsive'\nimport { toVW, getWidthOfColumns } from 'styles/layout'\n\nimport VideoTimestamp from './VideoTimestamp'\n\nconst StyledWrapper = styled.div`\n  position: relative;\n\n  &:before,\n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    left: -0.5em;\n    right: 0.25em;\n    height: 0.5em;\n    z-index: 1;\n    pointer-events: none;\n  }\n\n  &:before {\n    top: 0;\n    background: linear-gradient(to bottom, ${COLOR.BACKGROUND}, transparent);\n  }\n\n  &:after {\n    bottom: 0;\n    background: linear-gradient(to top, ${COLOR.BACKGROUND}, transparent);\n  }\n`\n\nconst StyledVideoTimestampList = styled.ol`\n  margin: 0 0 0 -0.5em;\n  width: calc(0.5em + 100%);\n  overflow: auto;\n  max-height: 300px;\n  padding: 0.5em 0;\n\n  ${screen.l`\n    max-height: calc(1em + ${toVW((getWidthOfColumns.l(7) * 9) / 16)});\n  `}\n\n  ${screen.xl`\n    max-height: calc(1em + ${toVW((getWidthOfColumns.xl(8) * 9) / 16)});\n  `}\n\n  ::-webkit-scrollbar {\n    width: 0.25em;\n    border-left: 2px solid ${COLOR.BACKGROUND_DARK};\n    border-radius: 0 ${BORDER_RADIUS.S} ${BORDER_RADIUS.S} 0;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: rgba(0, 0, 0, 0.2);\n    border-width: 0.5em 0;\n    border-style: solid;\n    border-color: ${COLOR.BACKGROUND};\n  }\n`\n\ninterface Props {\n  timestamps: Timestamp[]\n  playedSeconds: number\n  setPlayedSeconds: React.Dispatch<React.SetStateAction<number>>\n  setIsPlaying: React.Dispatch<React.SetStateAction<boolean>>\n  videoComponent: React.MutableRefObject<undefined>\n}\n\nconst VideoTimestampList: React.FC<Props> = ({\n  timestamps,\n  playedSeconds,\n  setPlayedSeconds,\n  setIsPlaying,\n  videoComponent,\n}) => {\n  const jumpToTimestamp = (t: number, startPlaying: boolean): void => {\n    if (!videoComponent.current) return\n    const target = videoComponent.current as { seekTo: (t: number) => {} }\n\n    target.seekTo(t)\n    setPlayedSeconds(t)\n    if (startPlaying) setIsPlaying(true)\n  }\n\n  let segment: number\n  timestamps.forEach(({ t }, i) => {\n    if (playedSeconds >= t) segment = i\n  })\n\n  return (\n    <StyledWrapper>\n      <StyledVideoTimestampList>\n        {timestamps.map(({ t, text, link, book }, i) => (\n          <VideoTimestamp\n            key={t}\n            t={t}\n            text={text}\n            link={link}\n            book={book}\n            jumpToTimestamp={jumpToTimestamp}\n            active={segment === i}\n          />\n        ))}\n      </StyledVideoTimestampList>\n    </StyledWrapper>\n  )\n}\n\nexport default VideoTimestampList\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\n\nimport { Video } from 'types/video'\nimport { formatDate } from 'utils/formatting/time'\nimport { formatNumberInThousands } from 'utils/formatting/numbers'\nimport useWindowSize from 'utils/hooks/useWindowSize'\nimport { FONT, BREAKPOINT } from 'styles/tokens'\nimport { trim } from 'styles/helpers'\nimport { screen, screenMin } from 'styles/responsive'\nimport Reveal from 'components/Reveal'\nimport RevealTrigger from 'components/Reveal/RevealTrigger'\nimport Link from 'components/links/Link'\n\nconst META_ARIA_ID = 'book-meta'\n\nconst StyledAside = styled.aside`\n  margin-bottom: 1em;\n`\n\nconst StyledRevealTrigger = styled(RevealTrigger)`\n  ${screenMin.m`\n    display: none;\n  `}\n`\n\nconst StyledReveal = styled.dl`\n  ${trim}\n\n  ${screen.s`\n    padding: 0.5em 0 0 1em;\n  `}\n`\n\nconst StyledDt = styled.dt`\n  font-size: ${FONT.SIZE.S};\n  font-weight: ${FONT.WEIGHT.BOLD};\n  margin: 0.5em 0 0;\n\n  ${screenMin.m`\n    margin: 1em 0 0;\n  `}\n`\n\nconst StyledDd = styled.dd`\n  font-size: ${FONT.SIZE.S};\n  margin: 0;\n`\n\ntype Props = Pick<\n  Video,\n  'datePublished' | 'viewCount' | 'commentCount' | 'youtubeId'\n>\n\nconst VideoMeta: React.FC<Props> = ({\n  datePublished,\n  viewCount,\n  commentCount,\n  youtubeId,\n}) => {\n  const { width: windowWidth } = useWindowSize()\n  const [isOpen, setIsOpen] = useState(false)\n\n  return (\n    <StyledAside>\n      <StyledRevealTrigger\n        onClick={(): void => setIsOpen(!isOpen)}\n        open={isOpen}\n        ariaId={META_ARIA_ID}\n      >\n        Video information\n      </StyledRevealTrigger>\n\n      <Reveal\n        as={StyledReveal}\n        open={(windowWidth && windowWidth > BREAKPOINT.S) || isOpen}\n        ariaId={META_ARIA_ID}\n      >\n        <StyledDt>Date posted</StyledDt>\n        <StyledDd>\n          <time>{formatDate(datePublished)}</time>\n        </StyledDd>\n\n        {viewCount >\n          parseInt(process.env.GATSBY_YOUTUBE_VIEWS_MINIMUM_VISIBLE) && (\n          <>\n            <StyledDt>Statistics</StyledDt>\n            <StyledDd>{formatNumberInThousands(viewCount)} views</StyledDd>\n            <StyledDd>\n              <Link as=\"a\" href={`https://youtu.be/${youtubeId}`}>\n                {formatNumberInThousands(commentCount)} comments\n              </Link>\n            </StyledDd>\n          </>\n        )}\n      </Reveal>\n    </StyledAside>\n  )\n}\n\nexport default VideoMeta\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { Book } from 'types/book'\nimport { FONT } from 'styles/tokens'\nimport { trim } from 'styles/helpers'\nimport Link from 'components/links/Link'\nimport StarRating from 'components/StarRating'\nimport ArrowIcon from 'components/icons/ArrowIcon'\nimport BookAffiliates from 'components/BookAffiliates'\n\nconst StyledAside = styled.aside`\n  ${trim}\n`\n\nconst StyledLink = styled(Link)`\n  font-size: ${FONT.SIZE.S};\n  font-weight: ${FONT.WEIGHT.BOLD};\n`\n\nconst StyledStarRating = styled(StarRating)`\n  font-size: ${FONT.SIZE.S};\n`\n\ntype Props = Pick<Book, 'rating7' | 'slug' | 'links'>\n\nconst VideoOwnedBook: React.FC<Props> = ({ rating7, slug, links }) => (\n  <StyledAside>\n    <StyledStarRating of7={rating7} />\n    <StyledLink to={slug}>\n      Book page\n      <ArrowIcon />\n    </StyledLink>\n\n    <BookAffiliates links={links} />\n  </StyledAside>\n)\n\nexport default VideoOwnedBook\n","import React, { useRef, useState } from 'react'\nimport { graphql } from 'gatsby'\nimport styled from 'styled-components'\n\nimport { PageProps } from 'types/page'\nimport PATHS from 'routes/paths'\nimport Layout from 'Layout'\nimport { Video } from 'types/video'\nimport { BookCardType } from 'types/book'\nimport { BookSnapshot } from 'types/book'\nimport { stripHtml } from 'utils/formatting/text'\nimport H from 'components/H'\nimport Grid from 'components/Grid'\nimport GridItem from 'components/Grid/GridItem'\nimport RelatedBooks from 'components/RelatedBooks'\nimport MarkdownWrapper from 'components/MarkdownWrapper'\nimport { screen, screenMin, screenMax } from 'styles/responsive'\nimport { FONT } from 'styles/tokens'\nimport { GAP, toVW } from 'styles/layout'\n\nimport VideoPlayer from './VideoPlayer'\nimport VideoTimestampList from './VideoTimestampList'\nimport VideoMeta from './VideoMeta'\nimport VideoOwnedBook from './VideoOwnedBook'\n\n// import YouTubeDescription from 'components/YouTubeDescription'\n\nconst StyledTimestampGridItem = styled(GridItem)`\n  margin-top: 0.5em;\n\n  ${screenMin.l`\n    margin-bottom: -0.5em;\n  `}\n`\n\nconst StyledMeta = styled.aside`\n  ${screenMin.m`\n    margin-top: 1em;\n  `}\n\n  ${screenMin.l`\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: ${toVW(GAP.L)};\n  `}\n\n  ${screen.xl`\n    grid-gap: ${toVW(GAP.XL)};\n  `}\n`\n\nconst StyledTitleWrapper = styled.div`\n  ${screenMin.l`\n    align-self: end;\n  `}\n`\n\nconst StyledTitle = styled(H)`\n  margin: 0.5em 0 -0.2em;\n`\n\nconst StyledBlockquote = styled.blockquote`\n  position: relative;\n  margin: 1.5em 0 1.5em 1.5em;\n\n  ${screenMax.m`\n    display: none;\n  `}\n\n  &:before {\n    content: '“';\n    position: absolute;\n    left: -0.5em;\n    top: 0.25em;\n    line-height: 0;\n    font-size: 4em;\n    font-family: ${FONT.FAMILY.DECORATIVE};\n  }\n`\n\ninterface Props extends PageProps {\n  data: {\n    video: Video\n  }\n}\n\nconst VideoPage: React.FC<Props> = ({ data: { video }, location }) => {\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [playedSeconds, setPlayedSeconds] = useState(0)\n  const videoComponent = useRef()\n\n  const ownedBook = video.ownedBy as BookSnapshot\n  const relatedBooks = video.relatedBooks as BookCardType[]\n\n  const featuredRelatedBookSlugs = (video.timestamps || [])\n    .filter((b) => b.book)\n    .map((b) => b.book.slug)\n\n  const flipLayout = ownedBook || !video.timestamps\n\n  return (\n    <Layout\n      location={location}\n      navTitle=\"Back to all videos\"\n      navTitleLink={PATHS.VIDEOS}\n      title={video.title}\n      description={stripHtml(video.html)}\n      shareImage={video.image.childImageSharp.share.src}\n    >\n      {/* <YouTubeDescription video={video} /> */}\n\n      <Grid full>\n        <GridItem columnsFromL=\"1/8\" columnsFromXL=\"1/9\">\n          <VideoPlayer\n            videoComponent={videoComponent}\n            youtubeId={video.youtubeId}\n            isPlaying={isPlaying}\n            setIsPlaying={setIsPlaying}\n            setPlayedSeconds={setPlayedSeconds}\n            backgroundColor={video.image.colors.muted}\n          />\n        </GridItem>\n\n        <GridItem\n          as={StyledTitleWrapper}\n          columnsFromM=\"5 / 13\"\n          columnsFromL=\"8 / 14\"\n          columnsFromXL=\"9 / 15\"\n          rows={flipLayout ? '2/3' : '3/4'}\n          rowsFromL={flipLayout ? '1/2' : '2/3'}\n        >\n          {video.quote && <StyledBlockquote>{video.quote}</StyledBlockquote>}\n          <StyledTitle as=\"h1\" size=\"L\">\n            {video.title}\n          </StyledTitle>\n        </GridItem>\n\n        {video.html && (\n          <GridItem\n            columnsFromM=\"5 / 13\"\n            columnsFromL=\"8/14\"\n            columnsFromXL=\"9/15\"\n          >\n            <MarkdownWrapper dangerouslySetInnerHTML={{ __html: video.html }} />\n          </GridItem>\n        )}\n\n        <GridItem\n          as={StyledMeta}\n          spanRows={3}\n          spanRowsFromL={video.html && video.timestamps ? 2 : 1}\n          spanFromM={4}\n          columnsFromL=\"2/8\"\n          columnsFromXL=\"3/9\"\n        >\n          <VideoMeta\n            datePublished={video.datePublished}\n            viewCount={video.viewCount}\n            commentCount={video.commentCount}\n            youtubeId={video.youtubeId}\n          />\n\n          {ownedBook && (\n            <VideoOwnedBook\n              rating7={ownedBook.rating7}\n              slug={ownedBook.slug}\n              links={ownedBook.links}\n            />\n          )}\n        </GridItem>\n\n        {video.timestamps && (\n          <GridItem\n            as={StyledTimestampGridItem}\n            columnsFromM=\"5 / 13\"\n            columnsFromL=\"8/15\"\n            columnsFromXL=\"9/17\"\n            rows={flipLayout ? '3/4' : '2/3'}\n            rowsFromL={flipLayout ? '2/3' : '1/2'}\n            style={{\n              marginTop: flipLayout ? '-0.25em' : '-0.75em',\n              marginBottom: '-0.5em',\n              alignSelf: flipLayout ? 'start' : 'end',\n            }}\n          >\n            <VideoTimestampList\n              timestamps={video.timestamps}\n              playedSeconds={playedSeconds}\n              setPlayedSeconds={setPlayedSeconds}\n              setIsPlaying={setIsPlaying}\n              videoComponent={videoComponent}\n            />\n          </GridItem>\n        )}\n      </Grid>\n\n      <RelatedBooks\n        books={relatedBooks}\n        featuredSlugs={featuredRelatedBookSlugs}\n        ownedSlug={ownedBook && ownedBook.slug}\n      />\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query VideoPage($id: String!) {\n    video: video(id: { eq: $id }) {\n      ...VideoFields\n    }\n  }\n`\n\nexport default VideoPage\n","import { makeIsbn10 } from 'utils/formatting/isbn'\n\nexport const AFFILIATES = {\n  GOODREADS: 'gr',\n  AMAZON: 'amzn',\n  BOOK_DEPOSITORY: 'bd',\n}\n\nexport const getLink = (isbn: string, affiliateAbbr: string): string => {\n  if (affiliateAbbr === AFFILIATES.GOODREADS)\n    return `https://www.goodreads.com/search?query=${isbn}`\n\n  if (affiliateAbbr === AFFILIATES.AMAZON)\n    return `https://www.amazon.co.uk/dp/${makeIsbn10(\n      String(isbn)\n    )}?tag=thcdex-21`\n\n  if (affiliateAbbr === AFFILIATES.BOOK_DEPOSITORY)\n    return `https://bookdepository.com/search?searchTerm=${isbn}&a_id=char`\n}\n\nexport const getShortLink = (isbn: string, affiliateAbbr: string): string =>\n  `https://cha.rs/${parseInt(isbn)\n    .toString(36)\n    .toUpperCase()}/${affiliateAbbr}`\n\nexport const getAffiliateLinks = (isbn: string): object => {\n  const long = {}\n  const short = {}\n\n  Object.values(AFFILIATES).forEach((affiliate: string) => {\n    long[affiliate] = getLink(isbn, affiliate)\n    short[affiliate] = getShortLink(isbn, affiliate)\n  })\n\n  return {\n    long,\n    short,\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { Book } from 'types/book'\nimport { AFFILIATES } from 'utils/urls/affiliates'\nimport { FONT } from 'styles/tokens'\nimport { screenMin } from 'styles/responsive'\nimport ArrowIcon from 'components/icons/ArrowIcon'\n\nconst AFFILIATE_ACTIONS = {\n  [AFFILIATES.GOODREADS]: 'See on Goodreads',\n  [AFFILIATES.AMAZON]: 'Buy on Amazon',\n  [AFFILIATES.BOOK_DEPOSITORY]: 'Buy on Book Depository',\n}\n\nconst StyledLi = styled.li`\n  font-size: ${FONT.SIZE.S};\n\n  ${screenMin.l`\n    margin-left: -1.5em;\n  `}\n`\n\nconst StyledArrowIcon = styled(ArrowIcon)`\n  margin: 0 0.75em 0 0;\n`\n\ntype Props = Pick<Book, 'links'>\n\nconst BookAffiliates: React.FC<Props> = ({ links }) => (\n  <ol>\n    {Object.entries(AFFILIATE_ACTIONS).map(([affiliateAbbr, label]) => (\n      <StyledLi key={affiliateAbbr}>\n        <a href={links.long[affiliateAbbr]}>\n          <StyledArrowIcon />\n          {label}\n        </a>\n      </StyledLi>\n    ))}\n  </ol>\n)\n\nexport default BookAffiliates\n"],"sourceRoot":""}