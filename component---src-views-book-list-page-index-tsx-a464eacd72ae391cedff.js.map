{"version":3,"sources":["webpack:///./node_modules/qs/lib/utils.js","webpack:///./src/utils/tracking/index.ts","webpack:///./node_modules/core-js/modules/es6.string.starts-with.js","webpack:///./node_modules/qs/lib/stringify.js","webpack:///./node_modules/qs/lib/index.js","webpack:///./src/utils/formatting/text.ts","webpack:///./node_modules/qs/lib/parse.js","webpack:///./src/utils/hooks/useIsomorphicLayoutEffect.ts","webpack:///./src/utils/hooks/useScrollPosition.ts","webpack:///./src/components/InfiniteScroll/index.tsx","webpack:///./node_modules/qs/lib/formats.js","webpack:///./src/utils/tags/index.ts","webpack:///./src/utils/hooks/useClickOutside.ts","webpack:///./src/views/BookListPage/FilterTrigger.tsx","webpack:///./src/utils/hooks/useQueryParamSync.ts","webpack:///./src/views/BookListPage/index.tsx"],"names":["has","Object","prototype","hasOwnProperty","isArray","Array","hexTable","array","i","push","toString","toUpperCase","arrayToObject","source","options","obj","plainObjects","create","length","module","exports","assign","target","keys","reduce","acc","key","combine","a","b","concat","compact","value","queue","o","prop","refs","item","j","val","indexOf","pop","compacted","compactQueue","decode","str","decoder","charset","strWithoutPlus","replace","unescape","decodeURIComponent","e","encode","defaultEncoder","string","Symbol","call","String","escape","$0","parseInt","slice","out","c","charCodeAt","charAt","isBuffer","constructor","isRegExp","merge","allowPrototypes","mergeTarget","forEach","targetItem","trackEvent","action","category","label","data","window","gtag","event_category","event_label","$export","toLength","context","$startsWith","P","F","startsWith","searchString","that","this","index","Math","min","arguments","undefined","search","utils","formats","arrayPrefixGenerators","brackets","prefix","comma","indices","repeat","pushToArray","arr","valueOrArray","apply","toISO","Date","toISOString","defaultFormat","defaults","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","encodeValuesOnly","format","formatter","formatters","serializeDate","date","skipNulls","strictNullHandling","stringify","object","generateArrayPrefix","filter","sort","v","join","objKeys","values","opts","TypeError","normalizeStringifyOptions","arrayFormat","joined","parse","stripHtml","text","trim","sortAlphabetically","strings","arrayLimit","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","numberStr","fromCharCode","parseKeys","givenKey","child","segment","exec","parent","chain","leaf","root","cleanRoot","isNaN","0","parseObject","Error","normalizeParseOptions","tempObj","cleanStr","limit","Infinity","parts","split","skipIndex","part","bracketEqualsPos","pos","parseValues","newObj","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","isBrowser","useScrollPosition","effect","wait","deps","element","throttleTimeout","callback","current","document","body","getBoundingClientRect","bottom","innerHeight","getScrollPosition","handleScroll","setTimeout","addEventListener","removeEventListener","InfiniteScroll","items","renderItem","anchorRef","createRef","useState","itemsToShow","setItemsToShow","map","ref","percentTwenties","util","Format","RFC1738","RFC3986","tagPrefixNames","type","genre","sub","splitTagByPrefix","tag","splitTagsByPrefix","tags","resultMap","prev","name","unprefixed","p","getTagsFromBooks","books","dedupedTags","Set","orderedTags","filterBooksByTags","filterType","filterGenre","filterSubject","ignorePrefix","filteredBooks","book","includes","useClickOutside","shouldWatch","onClickOut","useRef","handleClick","clientX","clientY","top","left","right","StyledWrapper","styled","span","StyledOptions","ol","COLOR","BACKGROUND_LIGHT","BORDER_RADIUS","M","BACKGROUND_DARK","SHADOW","S","StyledOption","li","FONT","SIZE","$default","FILTER_UNDERLINE_STYLE","StyledTrigger","FilterTrigger","defaultLabel","trackingCategory","onChange","isOpen","setIsOpen","wrapperElement","handleChange","newValue","optionsList","onClick","option","useQueryParamSync","pagePath","params","isInitialising","setIsInitialising","query","qs","setter","newQuery","newQueryString","navigate","StyledDetails","GridItem","StyledBook","big","screenMin","m","StyledClearFilterButton","Link","BookListPage","bookData","location","normalizeArray","setFilterType","setFilterGenre","setFilterSubject","isInitialisingFilter","PATHS","BOOKS","hasFilter","getOptions","optionBooks","Layout","navOpenOnDesktop","navTitle","title","Grid","as","full","spanFromM","spanFromL","rating7","id","spanRowsFromM","BookCard","featured"],"mappings":"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","file":"component---src-views-book-list-page-index-tsx-a464eacd72ae391cedff.js","sourcesContent":["'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.reduce\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = function () {\n  var array = [];\n\n  for (var i = 0; i < 256; ++i) {\n    array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n  }\n\n  return array;\n}();\n\nvar compactQueue = function compactQueue(queue) {\n  while (queue.length > 1) {\n    var item = queue.pop();\n    var obj = item.obj[item.prop];\n\n    if (isArray(obj)) {\n      var compacted = [];\n\n      for (var j = 0; j < obj.length; ++j) {\n        if (typeof obj[j] !== 'undefined') {\n          compacted.push(obj[j]);\n        }\n      }\n\n      item.obj[item.prop] = compacted;\n    }\n  }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n  var obj = options && options.plainObjects ? Object.create(null) : {};\n\n  for (var i = 0; i < source.length; ++i) {\n    if (typeof source[i] !== 'undefined') {\n      obj[i] = source[i];\n    }\n  }\n\n  return obj;\n};\n\nvar merge = function merge(target, source, options) {\n  /* eslint no-param-reassign: 0 */\n  if (!source) {\n    return target;\n  }\n\n  if (typeof source !== 'object') {\n    if (isArray(target)) {\n      target.push(source);\n    } else if (target && typeof target === 'object') {\n      if (options && (options.plainObjects || options.allowPrototypes) || !has.call(Object.prototype, source)) {\n        target[source] = true;\n      }\n    } else {\n      return [target, source];\n    }\n\n    return target;\n  }\n\n  if (!target || typeof target !== 'object') {\n    return [target].concat(source);\n  }\n\n  var mergeTarget = target;\n\n  if (isArray(target) && !isArray(source)) {\n    mergeTarget = arrayToObject(target, options);\n  }\n\n  if (isArray(target) && isArray(source)) {\n    source.forEach(function (item, i) {\n      if (has.call(target, i)) {\n        var targetItem = target[i];\n\n        if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n          target[i] = merge(targetItem, item, options);\n        } else {\n          target.push(item);\n        }\n      } else {\n        target[i] = item;\n      }\n    });\n    return target;\n  }\n\n  return Object.keys(source).reduce(function (acc, key) {\n    var value = source[key];\n\n    if (has.call(acc, key)) {\n      acc[key] = merge(acc[key], value, options);\n    } else {\n      acc[key] = value;\n    }\n\n    return acc;\n  }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n  return Object.keys(source).reduce(function (acc, key) {\n    acc[key] = source[key];\n    return acc;\n  }, target);\n};\n\nvar decode = function decode(str, decoder, charset) {\n  var strWithoutPlus = str.replace(/\\+/g, ' ');\n\n  if (charset === 'iso-8859-1') {\n    // unescape never throws, no try...catch needed:\n    return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n  } // utf-8\n\n\n  try {\n    return decodeURIComponent(strWithoutPlus);\n  } catch (e) {\n    return strWithoutPlus;\n  }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n  // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n  // It has been adapted here for stricter adherence to RFC 3986\n  if (str.length === 0) {\n    return str;\n  }\n\n  var string = str;\n\n  if (typeof str === 'symbol') {\n    string = Symbol.prototype.toString.call(str);\n  } else if (typeof str !== 'string') {\n    string = String(str);\n  }\n\n  if (charset === 'iso-8859-1') {\n    return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n      return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n    });\n  }\n\n  var out = '';\n\n  for (var i = 0; i < string.length; ++i) {\n    var c = string.charCodeAt(i);\n\n    if (c === 0x2D // -\n    || c === 0x2E // .\n    || c === 0x5F // _\n    || c === 0x7E // ~\n    || c >= 0x30 && c <= 0x39 // 0-9\n    || c >= 0x41 && c <= 0x5A // a-z\n    || c >= 0x61 && c <= 0x7A // A-Z\n    ) {\n        out += string.charAt(i);\n        continue;\n      }\n\n    if (c < 0x80) {\n      out = out + hexTable[c];\n      continue;\n    }\n\n    if (c < 0x800) {\n      out = out + (hexTable[0xC0 | c >> 6] + hexTable[0x80 | c & 0x3F]);\n      continue;\n    }\n\n    if (c < 0xD800 || c >= 0xE000) {\n      out = out + (hexTable[0xE0 | c >> 12] + hexTable[0x80 | c >> 6 & 0x3F] + hexTable[0x80 | c & 0x3F]);\n      continue;\n    }\n\n    i += 1;\n    c = 0x10000 + ((c & 0x3FF) << 10 | string.charCodeAt(i) & 0x3FF);\n    out += hexTable[0xF0 | c >> 18] + hexTable[0x80 | c >> 12 & 0x3F] + hexTable[0x80 | c >> 6 & 0x3F] + hexTable[0x80 | c & 0x3F];\n  }\n\n  return out;\n};\n\nvar compact = function compact(value) {\n  var queue = [{\n    obj: {\n      o: value\n    },\n    prop: 'o'\n  }];\n  var refs = [];\n\n  for (var i = 0; i < queue.length; ++i) {\n    var item = queue[i];\n    var obj = item.obj[item.prop];\n    var keys = Object.keys(obj);\n\n    for (var j = 0; j < keys.length; ++j) {\n      var key = keys[j];\n      var val = obj[key];\n\n      if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n        queue.push({\n          obj: obj,\n          prop: key\n        });\n        refs.push(val);\n      }\n    }\n  }\n\n  compactQueue(queue);\n  return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n  return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n  return [].concat(a, b);\n};\n\nmodule.exports = {\n  arrayToObject: arrayToObject,\n  assign: assign,\n  combine: combine,\n  compact: compact,\n  decode: decode,\n  encode: encode,\n  isBuffer: isBuffer,\n  isRegExp: isRegExp,\n  merge: merge\n};","/* eslint-disable @typescript-eslint/camelcase */\n\nexport const trackEvent = (\n  action: string,\n  category: string,\n  label: string,\n  data?: object\n): void => {\n  if (!window.gtag) return\n\n  window.gtag('event', action, {\n    event_category: category,\n    event_label: label,\n    ...data,\n  })\n}\n","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.date.to-iso-string\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar utils = require('./utils');\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar arrayPrefixGenerators = {\n  brackets: function brackets(prefix) {\n    return prefix + '[]';\n  },\n  comma: 'comma',\n  indices: function indices(prefix, key) {\n    return prefix + '[' + key + ']';\n  },\n  repeat: function repeat(prefix) {\n    return prefix;\n  }\n};\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\n\nvar pushToArray = function pushToArray(arr, valueOrArray) {\n  push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\nvar defaultFormat = formats['default'];\nvar defaults = {\n  addQueryPrefix: false,\n  allowDots: false,\n  charset: 'utf-8',\n  charsetSentinel: false,\n  delimiter: '&',\n  encode: true,\n  encoder: utils.encode,\n  encodeValuesOnly: false,\n  format: defaultFormat,\n  formatter: formats.formatters[defaultFormat],\n  // deprecated\n  indices: false,\n  serializeDate: function serializeDate(date) {\n    return toISO.call(date);\n  },\n  skipNulls: false,\n  strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n  return typeof v === 'string' || typeof v === 'number' || typeof v === 'boolean' || typeof v === 'symbol' || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset) {\n  var obj = object;\n\n  if (typeof filter === 'function') {\n    obj = filter(prefix, obj);\n  } else if (obj instanceof Date) {\n    obj = serializeDate(obj);\n  } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n    obj = obj.join(',');\n  }\n\n  if (obj === null) {\n    if (strictNullHandling) {\n      return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n    }\n\n    obj = '';\n  }\n\n  if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n    if (encoder) {\n      var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n      return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n    }\n\n    return [formatter(prefix) + '=' + formatter(String(obj))];\n  }\n\n  var values = [];\n\n  if (typeof obj === 'undefined') {\n    return values;\n  }\n\n  var objKeys;\n\n  if (isArray(filter)) {\n    objKeys = filter;\n  } else {\n    var keys = Object.keys(obj);\n    objKeys = sort ? keys.sort(sort) : keys;\n  }\n\n  for (var i = 0; i < objKeys.length; ++i) {\n    var key = objKeys[i];\n\n    if (skipNulls && obj[key] === null) {\n      continue;\n    }\n\n    if (isArray(obj)) {\n      pushToArray(values, stringify(obj[key], typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset));\n    } else {\n      pushToArray(values, stringify(obj[key], prefix + (allowDots ? '.' + key : '[' + key + ']'), generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset));\n    }\n  }\n\n  return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n  if (!opts) {\n    return defaults;\n  }\n\n  if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n    throw new TypeError('Encoder has to be a function.');\n  }\n\n  var charset = opts.charset || defaults.charset;\n\n  if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n    throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n  }\n\n  var format = formats['default'];\n\n  if (typeof opts.format !== 'undefined') {\n    if (!has.call(formats.formatters, opts.format)) {\n      throw new TypeError('Unknown format option provided.');\n    }\n\n    format = opts.format;\n  }\n\n  var formatter = formats.formatters[format];\n  var filter = defaults.filter;\n\n  if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n    filter = opts.filter;\n  }\n\n  return {\n    addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n    allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n    charset: charset,\n    charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n    delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n    encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n    encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n    encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n    filter: filter,\n    formatter: formatter,\n    serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n    skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n    sort: typeof opts.sort === 'function' ? opts.sort : null,\n    strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n  };\n};\n\nmodule.exports = function (object, opts) {\n  var obj = object;\n  var options = normalizeStringifyOptions(opts);\n  var objKeys;\n  var filter;\n\n  if (typeof options.filter === 'function') {\n    filter = options.filter;\n    obj = filter('', obj);\n  } else if (isArray(options.filter)) {\n    filter = options.filter;\n    objKeys = filter;\n  }\n\n  var keys = [];\n\n  if (typeof obj !== 'object' || obj === null) {\n    return '';\n  }\n\n  var arrayFormat;\n\n  if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n    arrayFormat = opts.arrayFormat;\n  } else if (opts && 'indices' in opts) {\n    arrayFormat = opts.indices ? 'indices' : 'repeat';\n  } else {\n    arrayFormat = 'indices';\n  }\n\n  var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n  if (!objKeys) {\n    objKeys = Object.keys(obj);\n  }\n\n  if (options.sort) {\n    objKeys.sort(options.sort);\n  }\n\n  for (var i = 0; i < objKeys.length; ++i) {\n    var key = objKeys[i];\n\n    if (options.skipNulls && obj[key] === null) {\n      continue;\n    }\n\n    pushToArray(keys, stringify(obj[key], key, generateArrayPrefix, options.strictNullHandling, options.skipNulls, options.encode ? options.encoder : null, options.filter, options.sort, options.allowDots, options.serializeDate, options.formatter, options.encodeValuesOnly, options.charset));\n  }\n\n  var joined = keys.join(options.delimiter);\n  var prefix = options.addQueryPrefix === true ? '?' : '';\n\n  if (options.charsetSentinel) {\n    if (options.charset === 'iso-8859-1') {\n      // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n      prefix += 'utf8=%26%2310003%3B&';\n    } else {\n      // encodeURIComponent('✓')\n      prefix += 'utf8=%E2%9C%93&';\n    }\n  }\n\n  return joined.length > 0 ? prefix + joined : '';\n};","'use strict';\n\nvar stringify = require('./stringify');\n\nvar parse = require('./parse');\n\nvar formats = require('./formats');\n\nmodule.exports = {\n  formats: formats,\n  parse: parse,\n  stringify: stringify\n};","import { Book } from 'types/book'\n\nexport const getBookDetailsFromString = (\n  text: string\n): Pick<Book, 'title' | 'author'> | undefined => {\n  const referenceMatch = text.match(/^(.+), (.+)$/)\n  return (\n    referenceMatch && {\n      title: referenceMatch[1],\n      author: referenceMatch[2],\n    }\n  )\n}\n\nexport const formatBookDetails = ({\n  title,\n  author,\n}: Pick<Book, 'title' | 'author'>): string => `${title} by ${author}`\n\nexport const stripHtml = (text: string): string =>\n  text\n    .replace(/<\\/[^>]+><[^>/]+>/gm, ' ')\n    .replace(/<\\/?[^>]+>/g, '')\n    .replace(/ +/gm, ' ')\n    .trim()\n\nexport const sortAlphabetically = (strings: string[]): string[] =>\n  strings.sort((a, b) => (a < b ? -1 : a > b ? 1 : 0))\n","'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\nvar defaults = {\n  allowDots: false,\n  allowPrototypes: false,\n  arrayLimit: 20,\n  charset: 'utf-8',\n  charsetSentinel: false,\n  comma: false,\n  decoder: utils.decode,\n  delimiter: '&',\n  depth: 5,\n  ignoreQueryPrefix: false,\n  interpretNumericEntities: false,\n  parameterLimit: 1000,\n  parseArrays: true,\n  plainObjects: false,\n  strictNullHandling: false\n};\n\nvar interpretNumericEntities = function interpretNumericEntities(str) {\n  return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n    return String.fromCharCode(parseInt(numberStr, 10));\n  });\n}; // This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\n\n\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\n\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n  var obj = {};\n  var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n  var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n  var parts = cleanStr.split(options.delimiter, limit);\n  var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n\n  var i;\n  var charset = options.charset;\n\n  if (options.charsetSentinel) {\n    for (i = 0; i < parts.length; ++i) {\n      if (parts[i].indexOf('utf8=') === 0) {\n        if (parts[i] === charsetSentinel) {\n          charset = 'utf-8';\n        } else if (parts[i] === isoSentinel) {\n          charset = 'iso-8859-1';\n        }\n\n        skipIndex = i;\n        i = parts.length; // The eslint settings do not allow break;\n      }\n    }\n  }\n\n  for (i = 0; i < parts.length; ++i) {\n    if (i === skipIndex) {\n      continue;\n    }\n\n    var part = parts[i];\n    var bracketEqualsPos = part.indexOf(']=');\n    var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n    var key, val;\n\n    if (pos === -1) {\n      key = options.decoder(part, defaults.decoder, charset, 'key');\n      val = options.strictNullHandling ? null : '';\n    } else {\n      key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n      val = options.decoder(part.slice(pos + 1), defaults.decoder, charset, 'value');\n    }\n\n    if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n      val = interpretNumericEntities(val);\n    }\n\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n      val = val.split(',');\n    }\n\n    if (part.indexOf('[]=') > -1) {\n      val = isArray(val) ? [val] : val;\n    }\n\n    if (has.call(obj, key)) {\n      obj[key] = utils.combine(obj[key], val);\n    } else {\n      obj[key] = val;\n    }\n  }\n\n  return obj;\n};\n\nvar parseObject = function parseObject(chain, val, options) {\n  var leaf = val;\n\n  for (var i = chain.length - 1; i >= 0; --i) {\n    var obj;\n    var root = chain[i];\n\n    if (root === '[]' && options.parseArrays) {\n      obj = [].concat(leaf);\n    } else {\n      obj = options.plainObjects ? Object.create(null) : {};\n      var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n      var index = parseInt(cleanRoot, 10);\n\n      if (!options.parseArrays && cleanRoot === '') {\n        obj = {\n          0: leaf\n        };\n      } else if (!isNaN(index) && root !== cleanRoot && String(index) === cleanRoot && index >= 0 && options.parseArrays && index <= options.arrayLimit) {\n        obj = [];\n        obj[index] = leaf;\n      } else {\n        obj[cleanRoot] = leaf;\n      }\n    }\n\n    leaf = obj;\n  }\n\n  return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n  if (!givenKey) {\n    return;\n  } // Transform dot notation to bracket notation\n\n\n  var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey; // The regex chunks\n\n  var brackets = /(\\[[^[\\]]*])/;\n  var child = /(\\[[^[\\]]*])/g; // Get the parent\n\n  var segment = options.depth > 0 && brackets.exec(key);\n  var parent = segment ? key.slice(0, segment.index) : key; // Stash the parent if it exists\n\n  var keys = [];\n\n  if (parent) {\n    // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n    if (!options.plainObjects && has.call(Object.prototype, parent)) {\n      if (!options.allowPrototypes) {\n        return;\n      }\n    }\n\n    keys.push(parent);\n  } // Loop through children appending to the array until we hit depth\n\n\n  var i = 0;\n\n  while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n    i += 1;\n\n    if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n      if (!options.allowPrototypes) {\n        return;\n      }\n    }\n\n    keys.push(segment[1]);\n  } // If there's a remainder, just add whatever is left\n\n\n  if (segment) {\n    keys.push('[' + key.slice(segment.index) + ']');\n  }\n\n  return parseObject(keys, val, options);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n  if (!opts) {\n    return defaults;\n  }\n\n  if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n    throw new TypeError('Decoder has to be a function.');\n  }\n\n  if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n    throw new Error('The charset option must be either utf-8, iso-8859-1, or undefined');\n  }\n\n  var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n  return {\n    allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n    allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n    arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n    charset: charset,\n    charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n    comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n    decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n    delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n    // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n    depth: typeof opts.depth === 'number' || opts.depth === false ? +opts.depth : defaults.depth,\n    ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n    interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n    parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n    parseArrays: opts.parseArrays !== false,\n    plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n    strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n  };\n};\n\nmodule.exports = function (str, opts) {\n  var options = normalizeParseOptions(opts);\n\n  if (str === '' || str === null || typeof str === 'undefined') {\n    return options.plainObjects ? Object.create(null) : {};\n  }\n\n  var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n  var obj = options.plainObjects ? Object.create(null) : {}; // Iterate over the keys and setup the new object\n\n  var keys = Object.keys(tempObj);\n\n  for (var i = 0; i < keys.length; ++i) {\n    var key = keys[i];\n    var newObj = parseKeys(key, tempObj[key], options);\n    obj = utils.merge(obj, newObj, options);\n  }\n\n  return utils.compact(obj);\n};","import { useEffect, useLayoutEffect } from 'react'\n\nconst useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffect : useEffect\n\nexport default useIsomorphicLayoutEffect\n","import useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nconst isBrowser = typeof window !== `undefined`\n\nconst getScrollPosition = (\n  element: React.RefObject<React.ReactNode>\n): number => {\n  if (!isBrowser) return 0\n\n  const target = (element.current || document.body) as HTMLElement\n  return target.getBoundingClientRect().bottom - window.innerHeight\n}\n\nconst useScrollPosition = (\n  effect: (pos: number) => void,\n  wait: number,\n  deps: any[], // eslint-disable-line\n  element?: React.RefObject<React.ReactNode>\n): void => {\n  let throttleTimeout = null\n\n  const callback = (): void => {\n    effect(getScrollPosition(element))\n    throttleTimeout = null\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isBrowser) {\n      return\n    }\n\n    const handleScroll = (): void => {\n      if (wait) {\n        if (throttleTimeout === null) {\n          throttleTimeout = setTimeout(callback, wait)\n        }\n      } else {\n        callback()\n      }\n    }\n\n    window.addEventListener('scroll', handleScroll)\n\n    return (): void => window.removeEventListener('scroll', handleScroll)\n  }, deps || [])\n}\n\nexport default useScrollPosition\n","import React, { useState, useLayoutEffect, createRef } from 'react'\n\nimport useScrollPosition from 'utils/hooks/useScrollPosition'\n\nconst SCROLL_BUFFER = 300\nconst INITIAL_COUNT = 24\nconst INCREMENT = 8\n\nconst isBrowser = typeof window !== `undefined`\n\ninterface Props {\n  items: object[]\n  renderItem: (item: object) => React.ReactNode\n}\n\nconst InfiniteScroll: React.FC<Props> = ({ items, renderItem }) => {\n  const anchorRef = createRef()\n  const [itemsToShow, setItemsToShow] = useState(INITIAL_COUNT)\n\n  useLayoutEffect(() => {\n    setItemsToShow(INITIAL_COUNT)\n  }, [items.length])\n\n  useScrollPosition(\n    (pos) => {\n      if (pos < 400 && itemsToShow < items.length)\n        setItemsToShow(itemsToShow + INCREMENT)\n    },\n    SCROLL_BUFFER,\n    [itemsToShow, items.length],\n    anchorRef\n  )\n\n  return (\n    <>\n      {items.slice(0, isBrowser ? itemsToShow : items.length).map(renderItem)}\n      <span ref={anchorRef as React.LegacyRef<HTMLSpanElement>} />\n    </>\n  )\n}\n\nexport default InfiniteScroll\n","'use strict';\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n  RFC1738: 'RFC1738',\n  RFC3986: 'RFC3986'\n};\nmodule.exports = util.assign({\n  'default': Format.RFC3986,\n  formatters: {\n    RFC1738: function RFC1738(value) {\n      return replace.call(value, percentTwenties, '+');\n    },\n    RFC3986: function RFC3986(value) {\n      return String(value);\n    }\n  }\n}, Format);","import { sortAlphabetically } from 'utils/formatting/text'\n\nexport type TagPrefix = 'type' | 'genre' | 'sub'\n\nconst tagPrefixNames = {\n  type: 'Type',\n  genre: 'Genre',\n  sub: 'Subject',\n}\n\nexport interface BookWithTags {\n  tags: string[]\n}\n\nexport const splitTagByPrefix = (tag: string): [string, string, string] => {\n  const parts = tag.split('-')\n  return [parts[0], parts.slice(1).join('-'), tag]\n}\n\nexport const splitTagsByPrefix = (\n  tags: string[]\n): {\n  prefix: string\n  values: {\n    name: string\n    unprefixed: string\n  }[]\n}[] => {\n  const resultMap = tags\n    .map(splitTagByPrefix)\n    .reduce((prev, [prefix, name, unprefixed]) => {\n      const value = { name, unprefixed }\n      if (prev[prefix]) {\n        prev[prefix].push(value)\n      } else {\n        prev[prefix] = [value]\n      }\n      return prev\n    }, {})\n\n  return Object.keys(tagPrefixNames)\n    .filter((p) => resultMap[p])\n    .map((prefix) => ({\n      prefix: tagPrefixNames[prefix],\n      values: resultMap[prefix],\n    }))\n}\n\nexport const getTagsFromBooks = (\n  books: BookWithTags[],\n  prefix?: TagPrefix\n): string[] => {\n  const tags = []\n  books.forEach((b) => tags.push(...b.tags))\n  const dedupedTags = [...new Set(tags)]\n  const orderedTags = sortAlphabetically(dedupedTags)\n\n  if (!prefix) return orderedTags\n\n  return orderedTags\n    .filter((tag) => tag.startsWith(`${prefix}-`))\n    .map((tag) => tag.slice(prefix.length + 1))\n}\n\nexport const filterBooksByTags = (\n  books: BookWithTags[],\n  filterType?: string,\n  filterGenre?: string,\n  filterSubject?: string,\n  ignorePrefix?: TagPrefix\n): BookWithTags[] => {\n  let filteredBooks = books\n  if (filterType && ignorePrefix !== 'type')\n    filteredBooks = filteredBooks.filter((book) =>\n      book.tags.includes(`type-${filterType}`)\n    )\n  if (filterGenre && ignorePrefix !== 'genre')\n    filteredBooks = filteredBooks.filter((book) =>\n      book.tags.includes(`genre-${filterGenre}`)\n    )\n  if (filterSubject && ignorePrefix !== 'sub')\n    filteredBooks = filteredBooks.filter((book) =>\n      book.tags.includes(`sub-${filterSubject}`)\n    )\n\n  return filteredBooks\n}\n","import React, { useEffect, useRef } from 'react'\n\nconst useClickOutside = (\n  shouldWatch: boolean,\n  onClickOut: () => void\n): [React.MutableRefObject<undefined>] => {\n  const element = useRef()\n\n  const handleClick = ({ clientX, clientY }: MouseEvent): void => {\n    if (!element || !element.current) return\n\n    const { top, bottom, left, right } = element.current.getBoundingClientRect()\n\n    if (\n      clientX < left ||\n      clientX > right ||\n      clientY < top ||\n      clientY > bottom\n    ) {\n      onClickOut()\n    }\n  }\n\n  useEffect(() => {\n    if (shouldWatch) {\n      window.addEventListener('click', handleClick)\n    } else {\n      window.removeEventListener('click', handleClick)\n    }\n    return (): void => {\n      if (shouldWatch) window.removeEventListener('click', handleClick)\n    }\n  }, [shouldWatch])\n\n  return [element]\n}\n\nexport default useClickOutside\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport {\n  COLOR,\n  FONT,\n  BORDER_RADIUS,\n  FILTER_UNDERLINE_STYLE,\n} from 'styles/tokens'\nimport useClickOutside from 'utils/hooks/useClickOutside'\nimport { trackEvent } from 'utils/tracking'\n\nconst StyledWrapper = styled.span`\n  position: relative;\n  display: inline-block;\n`\n\nconst StyledOptions = styled.ol`\n  position: absolute;\n  background: ${COLOR.BACKGROUND_LIGHT};\n  border-radius: ${BORDER_RADIUS.M};\n  border: 1px solid ${COLOR.BACKGROUND_DARK};\n  box-shadow: 0 2px 8px ${COLOR.SHADOW}20;\n  min-width: 11em;\n  max-height: 20.5em;\n  top: -0.25rem;\n  left: -0.5rem;\n  margin: -1px; /* counteract border */\n  padding: 0 0 0.25rem;\n  z-index: 1;\n  line-height: 1.25;\n  overflow: auto;\n\n  ::-webkit-scrollbar {\n    width: 0.25em;\n    border-radius: 0 ${BORDER_RADIUS.S} ${BORDER_RADIUS.S} 0;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: ${COLOR.BACKGROUND_DARK};\n  }\n`\n\ninterface OptionProps {\n  $default?: boolean\n}\nconst StyledOption = styled.li<OptionProps>`\n  padding: 0.125rem 0.5rem;\n  font-size: ${FONT.SIZE.S};\n  cursor: pointer;\n  user-select: none;\n\n  ${({ $default }): string =>\n    $default &&\n    `\n    ${FILTER_UNDERLINE_STYLE};\n  `}\n\n  &:first-child {\n    ${FILTER_UNDERLINE_STYLE};\n    font-style: italic;\n    font-size: ${FONT.SIZE.M};\n    padding: 0.25rem 0.5rem;\n    line-height: 1.5;\n  }\n\n  &:nth-child(n + 2):hover {\n    background: ${COLOR.SHADOW}10;\n  }\n`\n\nconst StyledTrigger = styled.span`\n  ${FILTER_UNDERLINE_STYLE};\n  font-style: italic;\n  cursor: pointer;\n  user-select: none;\n`\n\ninterface Props {\n  value?: string\n  defaultLabel: string\n  options: string[]\n  trackingCategory: string\n  onChange: (value: string | string[]) => void\n}\n\nconst FilterTrigger: React.FC<Props> = ({\n  value,\n  defaultLabel,\n  options,\n  trackingCategory,\n  onChange,\n}) => {\n  const [isOpen, setIsOpen] = useState(false)\n  const [wrapperElement] = useClickOutside(isOpen, () => setIsOpen(false))\n  const text = value || defaultLabel\n\n  const handleChange = (newValue: string): void => {\n    setIsOpen(false)\n\n    if (!newValue) return onChange(undefined)\n\n    trackEvent('book-filter', trackingCategory, newValue)\n    return onChange(newValue)\n  }\n\n  const optionsList = value ? options.filter((o) => o !== value) : options\n  if (!optionsList || optionsList.length === 0)\n    return <>{value || defaultLabel}</>\n\n  return (\n    <StyledWrapper ref={wrapperElement}>\n      <StyledTrigger onClick={(): void => setIsOpen(!isOpen)}>\n        {text}\n      </StyledTrigger>\n\n      {isOpen && (\n        <StyledOptions>\n          <StyledOption onClick={(): void => setIsOpen(false)}>\n            {text}\n          </StyledOption>\n          {defaultLabel !== text && (\n            <StyledOption\n              onClick={(): void => handleChange(undefined)}\n              $default\n            >\n              {defaultLabel}\n            </StyledOption>\n          )}\n          {optionsList.map((option) => (\n            <StyledOption\n              key={option}\n              onClick={(): void => handleChange(option)}\n            >\n              {option}\n            </StyledOption>\n          ))}\n        </StyledOptions>\n      )}\n    </StyledWrapper>\n  )\n}\n\nexport default FilterTrigger\n","import React, { useState, useEffect } from 'react'\nimport { navigate } from '@reach/router'\nimport qs from 'qs'\n\ninterface Param {\n  key: string\n  value?: string\n  setter: React.Dispatch<string>\n}\n\nconst useQueryParamSync = (\n  pagePath: string,\n  searchString: string,\n  params: Param[]\n): [boolean] => {\n  const [isInitialising, setIsInitialising] = useState(true)\n\n  const query = qs.parse(searchString, {\n    ignoreQueryPrefix: true,\n    comma: true,\n  })\n\n  useEffect(() => {\n    params.forEach(({ setter, key }) => {\n      setter(query[key] as string)\n    })\n    setIsInitialising(false)\n  }, [])\n\n  // update values to match query\n  useEffect(() => {\n    params.forEach(({ key, value, setter }) => {\n      if (query[key] !== value) {\n        setter(query[key] as string)\n      }\n    })\n  }, [searchString])\n\n  // update query to match values\n  useEffect(\n    () => {\n      // only after initialisation so it doesn't reset query before initial filtering\n      if (!isInitialising) {\n        const newQuery = {}\n        params.forEach(({ key, value }) => {\n          newQuery[key] = value\n        })\n\n        const newQueryString = qs.stringify(newQuery, {\n          addQueryPrefix: true,\n          arrayFormat: 'comma',\n          encode: false,\n        })\n\n        if (newQueryString !== searchString) {\n          navigate(`${pagePath}${newQueryString}`)\n        }\n      }\n    },\n    params.map(({ value }) => value)\n  )\n\n  return [isInitialising]\n}\n\nexport default useQueryParamSync\n","import React, { useState } from 'react'\nimport { graphql } from 'gatsby'\nimport styled, { SimpleInterpolation } from 'styled-components'\n\nimport { PageProps } from 'types/page'\nimport { normalizeArray } from 'utils/graphql/normalize'\nimport Layout from 'Layout'\nimport { BookCardType } from 'types/book'\nimport { COLOR, FONT } from 'styles/tokens'\nimport { screenMin } from 'styles/responsive'\nimport Link from 'components/links/Link'\nimport BookCard from 'components/cards/BookCard'\nimport Grid from 'components/Grid'\nimport GridItem from 'components/Grid/GridItem'\nimport InfiniteScroll from 'components/InfiniteScroll'\nimport { getTagsFromBooks, filterBooksByTags, TagPrefix } from 'utils/tags'\nimport FilterTrigger from './FilterTrigger'\nimport PATHS from 'routes/paths'\nimport useQueryParamSync from 'utils/hooks/useQueryParamSync'\n\ninterface BookProps {\n  big: boolean\n}\n\nconst StyledDetails = styled(GridItem)`\n  background: ${COLOR.BACKGROUND_LIGHT};\n  padding: 1em;\n`\n\nconst StyledBook = styled(GridItem)<BookProps>`\n  ${({ big }): SimpleInterpolation => screenMin.m`\n    font-size: ${big ? '1.25em' : FONT.SIZE.S};\n  `}\n`\n\nconst StyledClearFilterButton = styled(Link)`\n  font-size: 0.75em;\n`\n\ninterface BookCardTypeWithTags extends BookCardType {\n  tags: string[]\n}\n\ninterface Props extends PageProps {\n  data: {\n    bookData: {\n      edges: {\n        node: BookCardTypeWithTags\n      }[]\n    }\n  }\n}\n\nconst BookListPage: React.FC<Props> = ({ data: { bookData }, location }) => {\n  const books = normalizeArray(bookData) as BookCardTypeWithTags[]\n\n  const [filterType, setFilterType] = useState(undefined)\n  const [filterGenre, setFilterGenre] = useState(undefined)\n  const [filterSubject, setFilterSubject] = useState(undefined)\n\n  const [isInitialisingFilter] = useQueryParamSync(\n    PATHS.BOOKS,\n    location.search,\n    [\n      {\n        key: 'type',\n        value: filterType,\n        setter: setFilterType,\n      },\n      {\n        key: 'genre',\n        value: filterGenre,\n        setter: setFilterGenre,\n      },\n      {\n        key: 'sub',\n        value: filterSubject,\n        setter: setFilterSubject,\n      },\n    ]\n  )\n\n  const filteredBooks = filterBooksByTags(\n    books,\n    filterType,\n    filterGenre,\n    filterSubject\n  )\n\n  const hasFilter = filterType || filterGenre || filterSubject\n\n  const getOptions = (prefix: TagPrefix): string[] => {\n    const optionBooks = hasFilter\n      ? filterBooksByTags(books, filterType, filterGenre, filterSubject, prefix)\n      : books\n    return getTagsFromBooks(optionBooks, prefix)\n  }\n\n  return (\n    <Layout\n      location={location}\n      navOpenOnDesktop\n      navTitle=\"Book reviews\"\n      title=\"Book reviews\"\n    >\n      {(!isInitialisingFilter || location.search === '') && (\n        <Grid as=\"ol\" full>\n          <StyledDetails span={2} spanFromM={6} spanFromL={4}>\n            <p>\n              Showing {filteredBooks.length} {}\n              {filteredBooks.length === 1 ? 'book' : 'books'}\n              <br />\n              <FilterTrigger\n                value={filterType}\n                defaultLabel=\"fiction and non-fiction\"\n                options={getOptions('type')}\n                trackingCategory=\"type\"\n                onChange={setFilterType}\n              />\n              <br />\n              in {}\n              <FilterTrigger\n                value={filterGenre}\n                defaultLabel=\"any genre\"\n                options={getOptions('genre')}\n                trackingCategory=\"genre\"\n                onChange={setFilterGenre}\n              />\n              <br />\n              about {}\n              <FilterTrigger\n                value={filterSubject}\n                defaultLabel=\"any subject\"\n                options={getOptions('sub')}\n                trackingCategory=\"sub\"\n                onChange={setFilterSubject}\n              />\n              {hasFilter && (\n                <>\n                  <br />\n                  <StyledClearFilterButton\n                    as=\"button\"\n                    onClick={(): void => {\n                      setFilterType(undefined)\n                      setFilterGenre(undefined)\n                      setFilterSubject(undefined)\n                    }}\n                  >\n                    clear filter\n                  </StyledClearFilterButton>\n                </>\n              )}\n            </p>\n          </StyledDetails>\n\n          <InfiniteScroll\n            items={filteredBooks}\n            renderItem={(book: BookCardType): React.ReactNode => {\n              const big = book.rating7 >= 6\n              return (\n                <StyledBook\n                  big={big}\n                  as=\"li\"\n                  key={book.id}\n                  span={1}\n                  spanFromM={big ? 6 : 3}\n                  spanFromL={big ? 4 : 2}\n                  spanRowsFromM={big ? 2 : 1}\n                >\n                  <BookCard book={book} featured={big} big={big} />\n                </StyledBook>\n              )\n            }}\n          />\n        </Grid>\n      )}\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query BookListPage {\n    bookData: allBook(sort: { fields: dateLastRead, order: DESC }) {\n      edges {\n        node {\n          ...BookCardFields\n          tags\n        }\n      }\n    }\n  }\n`\n\nexport default BookListPage\n"],"sourceRoot":""}